<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=800, initial-scale=1.0">
    <title>dbpill - Automated SQL indexer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@200..900&display=swap" rel="stylesheet">

    <!-- Social preview meta tags -->
    <meta name="description" content="dbpill is an automated SQL indexer that intercepts your Postgres queries, analyzes them, and applies the best indexes with one-click.">

    <!-- Open Graph -->
    <meta property="og:title" content="dbpill – Automated SQL indexer">
    <meta property="og:description" content="Intercept, analyze and fix slow Postgres queries automatically. No code changes required.">
    <meta property="og:image" content="preview.png">
    <meta property="og:type" content="website">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="dbpill – Automated SQL indexer">
    <meta name="twitter:description" content="Intercept, analyze and fix slow Postgres queries automatically. No code changes required.">
    <meta name="twitter:image" content="preview.png">
    <style>
        :root {
            --primary-color: #000;
            --secondary-color: #fff;
            --accent-color: #888;
        }
        
        body, html {
            margin: 0;
            padding: 0;
            font-family: "Inconsolata", monospace;
            font-optical-sizing: auto;
            font-weight: 400;
            font-style: normal;
            font-variation-settings: "wdth" 100;
            line-height: 1.6;
            color: #fff;    
            background-color: #111111;
        }

        h2 {
            font-weight: normal;
            color: #fff4db;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            padding: 20px 0;
            border-bottom: 1px solid var(--accent-color);
        }
        
        .logo {
            font-size: 30px;
            font-weight: 700;
            text-transform: lowercase;
            letter-spacing: 2px;
            border: 1px solid color(display-p3 0.964 0.7613 0.3253);
            color: color(display-p3 0.964 0.7613 0.3253);
            background: linear-gradient(to right, rgba(86, 65, 9, 0.8) 49%, rgba(73, 55, 12, 0.8) 1%, rgba(73, 55, 12, 0.5) 100%);
            display: inline-block;
            padding: 0 20px;
            border-radius: 30px;
            margin-right: 8px;
        }
        
        .header {
            padding: 20px 0;
            background-color: rgba(0, 0, 0, 0.5);
            background: radial-gradient(circle closest-corner at 50% 10px, #202020, #111111);
            color: rgba(255, 255, 255, 0.8);
            color: #fff;
        }

        .hero {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 10px 0;
            background-color: rgba(35, 35, 35, 1);
            background: radial-gradient(circle closest-corner at 50% 10px, #3a3a3a, #232323);
            color: rgba(255, 255, 255, 0.8);
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        .subheading {
            color: #fff;
            font-size: 18px;
            margin: 0;
        }
        
        .cta-container {
            text-align: center;
            padding: 20px;
        }

        .cta-button {
            display: inline-block;
            background: rgb(69, 132, 15);
            background: radial-gradient(circle 180px at 50% 10px, rgb(103, 132, 15), rgb(57, 80, 10));
            color: rgba(255, 255, 255, 0.8);
            text-shadow: none;
            box-shadow: 5px 5px 0 #000;
            color: var(--secondary-color);
            padding: 10px 20px;
            border-radius: 1px;
            text-decoration: none;
            font-size: 30px;
            line-height: 30px;
            border-top: 1px solid rgba(255, 255, 230, 0.2);
            border-left: 1px solid rgba(255, 255, 230, 0.2);
            border-right: 1px solid transparent;
            border-bottom: 1px solid transparent;


        }
        .cta-button:active {
            position: relative;
            top: 2px;
            left: 2px;
        }
        .cta-button:hover {
            filter: brightness(1.1);
        }
        
        .one-time-fee {
            color: rgba(255, 255, 255, 0.5);
            font-style: italic;
            font-size: 15px;
        }

        .motivation {
            color: #fff;
            padding: 1px 0;
            text-align: center;
            line-height: 1.6em;
            margin: 0;
            background: #232323;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .tips {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            background: radial-gradient(circle closest-corner at 50% 10px, #202020, #111111);
            padding: 20px;
            color: rgba(255, 255, 255, 0.8);
        }

        .tips h2 {
            text-align: center;
        }
        .tips ol li {
            color: #fff;
            padding: 5px 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.05);
        }

        .tips ol li::marker {
            color: #fff19f;
        }
        
        .feature {
            text-align: left;
        }
        
        .feature h2 {
            font-size: 18px;
            margin-bottom: 10px;
            font-weight: 400;
            color: rgba(30, 0, 0, 0.4);
        }
        
        .feature p {
        }
        
        footer {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            background: #111111;
            color: rgba(255, 255, 255, 0.5);
            padding: 20px 0;
            font-size: 12px;
        }

        .accent-1 {
            color: #fff9d5;
            border-bottom: 1px solid #fff19f88;
            font-weight: 600;
        }

        .accent-2 {
            color: #fff9d5;
            border-bottom: 1px solid #fff19f88;
            font-weight: 600;
        }

        .accent-3 {
            color: #fff9d5;
            border-bottom: 1px solid #fff19f88;
            font-weight: 600;
        }

        .accent-4 {
            color: #fff9d5;
            border-bottom: 1px solid #fff19f88;
            font-weight: 600;
        }


        .diagram {
            width: 100%;
            max-width: 700px;
            margin: 0 auto;
            margin-bottom: 40px;
            display: block;
        }

        .windows-container {
            display: flex;
            gap: 20px;
            margin: 20px auto;
            width: 100%;
            align-items: stretch;
        }
        .windows-container .usage-text {
            flex: 1 1 0;
            min-width: 0;
            text-shadow: 0 0 2px rgba(0, 0, 0, 1);
            font-size: 18px;
            color: #ffffffee;
        }

        .terminal-window {
            background-color: #2d2d2d;
            text-align: left;
            border-radius: 8px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            flex: 1;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .terminal-header {
            background: linear-gradient(180deg, #e8e8e8 0%, #d1d1d1 100%);
            height: 28px;
            display: flex;
            align-items: center;
            padding: 0 12px;
            border-bottom: 1px solid #b3b3b3;
        }

        .terminal-buttons {
            display: flex;
            gap: 8px;
        }

        .terminal-button {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 0.5px solid rgba(0, 0, 0, 0.1);
        }

        .terminal-button.close {
            background: linear-gradient(135deg, #ff5f57 0%, #ff4444 100%);
        }

        .terminal-button.minimize {
            background: linear-gradient(135deg, #ffbd2e 0%, #ffaa00 100%);
        }

        .terminal-button.maximize {
            background: linear-gradient(135deg, #28ca42 0%, #20aa35 100%);
        }

        .terminal-title {
            flex: 1;
            text-align: center;
            font-size: 13px;
            font-weight: 500;
            color: #4a4a4a;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        .command-summary {
            display: block;
            padding: 5px;
            background-color: #2f0d24;
            color: #ffffff;
            font-family: "SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Courier New", monospace;
            font-size: 12px;
            line-height: 1.5;
            margin: 0;
            flex: 1;
        }

        .browser-window {
            background-color: #2d2d2d;
            text-align: left;
            border-radius: 8px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            flex: 1;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .browser-header {
            background: linear-gradient(180deg, #e8e8e8 0%, #d1d1d1 100%);
            height: 40px;
            display: flex;
            align-items: center;
            padding: 0 16px;
            border-bottom: 1px solid #b3b3b3;
        }

        .browser-address-bar {
            flex: 1;
            display: flex;
            justify-content: center;
            padding: 0 20px;
        }

        .address-bar {
            background-color: #ffffff22;
            border: 1px solid #b3b3b3;
            border-radius: 8px;
            padding: 3px 16px;
            font-size: 13px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            min-width: 200px;
            text-align: center;
            color: #333;
        }

        .address-bar .protocol {
            color: #666;
        }

        .address-bar .domain {
            color: #333;
            font-weight: 500;
        }

        .address-bar .path {
            color: #666;
        }

        .browser-content {
            background-color: #2d2d2d;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .browser-image {
            display: block;
            max-width: 100%;
            max-height: 100%;
            border-radius: 4px;
        }

        @keyframes gradient-move {
            0% {
                background-position: 0% 50%;
            }
            100% {
                background-position: 200% 50%;
            }
        }
        .animated-gradient-text {
            background: repeating-linear-gradient(90deg, #feffa6b1 0%, #ffffffb1 50%, #feffa6b1 100%);
            background-size: 150% 150%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
            animation: gradient-move 3s linear infinite;
        }
        /* Header layout */
        .header .container {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .contact-info {
            color: color(display-p3 0.964 0.7613 0.3253);
        }
        .contact-info:hover {
            text-decoration: underline;
        }

        .highlight {
            color: #e4c7f0;
            font-weight: 600;
            border-bottom: 1px solid #e5a4ff88;
        }

        .faq h2 {
            text-align: center;
        }

        .faq .highlight {
            color: #c2f6ff;
            font-weight: 600;
            border-bottom: 1px solid #69868b;
        }

      
    </style>
</head>
<body>
    <main>
        <section class="header">
            <div class="container">
                <div style="display: flex; align-items: center; gap: 10px;">
                    <a href="/" style="text-decoration: none;"><div class="logo">dbpill</div></a>
                    <span class="subheading">Automated SQL indexer</span>
                </div>
                <div style="font-size: 14px; color: rgba(255, 255, 255, 0.8); text-align: right;">
                    A project by <a href="https://x.com/mayfer" class="contact-info">Murat</a>
                    <br />
                    Support: <a href="mailto:help@dbpill.com" class="contact-info">help@dbpill.com</a>
                    <br />
                    GitHub: <a href="https://github.com/mayfer/dbpill" class="contact-info">github.com/mayfer/dbpill</a>
                </div>
            </div>
        </section>

        <section class="hero">
            <div class="container">

                <div style="text-align: center; line-height: 1.6em;">
                    <p class="animated-gradient-text" style="font-size: 20px;">
                        Stop spending money &amp; time on replicas/caching/microservices<br />when the fix was a one-liner. Happens <i style="text-shadow: 0 0 5px rgb(255, 241, 82, 0.5);">*all the time*</i>.
                    </p>
                    <p style="font-size: 24px; color: #ffffff; text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);"><span style="color: color(display-p3 0.964 0.7613 0.3253);">dbpill</span> intercepts, finds & fixes sneaky slow queries</p>
                </div>

                <img class="diagram" src="./dbpill_diagram.svg" alt="dbpill workflow diagram" />
            
                <!-- removed CSS diagram; reverting to static SVG image only -->
            </div>
        </section>

        <section class="motivation">

            <div class="container">
                <div class="cta-container">
                    <span style="font-size: 14px; color: rgba(255, 255, 255, 0.9);">Version __APP_VERSION__ <span style="opacity: 0.4;">released July 4, 2025</span></span><br />
                    <a href="#" id="buy-button" class="cta-button">
                        <span style="font-size: 18px; color: rgba(255, 255, 255, 0.9);">Buy standalone executable</span><br />
                        <span style="text-shadow: 0 0 10px rgba(0, 0, 0, 0.5); "><span style="text-decoration: line-through; opacity: 0.3">$100</span> Free</span><br />
                        <span class="one-time-fee">
                            <ul style="padding: 0; margin: 10px 0 0 0; line-height: 1.2em; text-align: left; list-style: none;">
                                <li style="position: relative; padding-left: 1.2em; color: #fff9d5cc;">
                                    <span style="position: absolute; left: 0; opacity: 0.5;">&#8594;</span>
                                    One-time fee, updates included
                                </li>
                                <li style="position: relative; padding-left: 1.2em; color: #fff9d5bb;">
                                    <span style="position: absolute; left: 0; opacity: 0.5;">&#8594;</span>
                                    OS: Mac, Linux &amp; Windows (x64 &amp; arm64)
                                </li>
                                <li style="position: relative; padding-left: 1.2em; color: #fff9d5aa;">
                                    <span style="position: absolute; left: 0; opacity: 0.5;">&#8594;</span>
                                    DB: PostgreSQL only
                                </li>
                            </ul>
                        </span>
                    </a>
                    <br />
                    <div style="margin-top: 10px; color: rgba(255, 255, 255, 0.7);">Money back if you don't like it. <a href="#" id="redeem-link" style="color: #9bbf4d; text-decoration: underline;">Already purchased? Re-download</a></div>
                </div>
            </div>
        </section>

        <section class="hero">
            <div class="container">

                <h2 style="text-align: center;">Usage</h2>
                <div class="windows-container">
                    <div class="usage-text">1. Run dbpill &amp; intercept queries</div>
                    <div class="usage-text">2. View & optimize intercepted queries</div>
                </div>
                <div class="windows-container">
                    <div class="terminal-window">
                        <div class="terminal-header">
                            <div class="terminal-buttons">
                                <div class="terminal-button close"></div>
                                <div class="terminal-button minimize"></div>
                                <div class="terminal-button maximize"></div>
                            </div>
                            <div class="terminal-title">Terminal</div>
                            <div style="width: 68px;"></div> <!-- Spacer for centering -->
                        </div>
                        <code class="command-summary" style="color: #999;">
                            <span style="color: #999;">$</span> <span style="color: #fff19f;">
                                ./dbpill postgresql://user@host:5432/db
                            </span>
                            <br />
                            <span>PostgreSQL proxy running on port <span style="color: #ccc;">:5433</span><br />
                            <br />
                            → Connect to dbpill SQL proxy at <span style="color: #ccc;">postgres://user@localhost:5433/db</span> to intercept queries.
                            <br />→ Go to dbpill web UI at <span style="color: #ccc;">http://localhost:3000</span> to manage the results.<br />
                            <span style="color: #999;">█</span>
                            
                        </code>
                    </div>



                    <div class="browser-window">
                        <div class="browser-header">
                            <div class="terminal-buttons">
                                <div class="terminal-button close"></div>
                                <div class="terminal-button minimize"></div>
                                <div class="terminal-button maximize"></div>
                            </div>
                            <div class="browser-address-bar">
                                <div class="address-bar">
                                    <span class="protocol">http://</span><span class="domain">localhost:3000</span><span class="path">/queries</span>
                                </div>
                            </div>
                            <div style="width: 68px;"></div> <!-- Spacer for centering -->
                        </div>
                        <div class="browser-content">
                            <img class="browser-image" src="./dbpill_web.png" alt="dbpill Dashboard" />
                        </div>
                    </div>
                </div> 

                <div class="feature">
                    <p><span class='accent-1'>No code changes required</span> Just point your backend's SQL connection to dbpill.</p>
                </div>
                <div class="feature">
                    <p><span class='accent-4'>One-click AI analysis</span> Use your own LLM API keys with the latest models.</p>
                </div>
                <div class="feature">
                    <p><span class="accent-3">No guesswork, exact performance metrics</span> See the performance of your queries before & after indexing.</p>
                </div>
                <div class="feature">
                    <p><span class="accent-2">One-click apply, one-click revert</span> Instantly test suggested index improvements.</p>
                </div>
            </div>
        </section>

        <section class="tips">
            <div class="container">
                <h2>Quick Tips</h2>
                <ol>
                    <li>Works best with a populated database; using a clone of your production database is recommended.</li>
                    <li>Most queries should take under a millisecond when indexed correctly, even on tables with millions or even billions of rows.</li>
                    <li>Even if you have small tables, you can apply suggested indexes early to avoid future performance issues.</li>
                </ol>
            </div>
        </section>
        <section class="tips">
            <div class="container">
                <h2>Privacy</h2>
                <p><span class='highlight'>dbpill is a local application.</span> All intercepted queries are processed on your computer, and saved to a sqlite database in your filesystem (next to the executable).</p>
                <p><span class='highlight'>No data is sent to our servers.</span>  In fact, there are no servers.</p>
                <p><span class='highlight'>LLM usage is purely optional.</span> If you choose to use LLMs to assist with optimization, you can pick your own providers and API keys.</p>
                <p><span class='highlight'>The LLM prompts are public and can be previewed.</span>  You can view them in the web UI before they are sent.</p>
                <p style="text-shadow: 0 0 10px rgba(208, 121, 255, 1); background: linear-gradient(135deg, rgba(208, 121, 255, 0.4) 0%, rgba(180, 100, 230, 0.35) 50%, rgba(150, 80, 200, 0.3) 100%); padding: 10px 15px; border-radius: 5px;">If you have additional security &amp; privacy requirements, please contact <a href="mailto:sales@dbpill.com" style="color: #e5a4ff;">sales@dbpill.com</a> for enterprise support.</p>
            </div>
        </section>
        <section class="faq">
            <div class="container">
                <h2>FAQ</h2>
                <p><span class='highlight'>How is this different from slow query logs?</span> In addition to slow queries, dbpill also intercepts query params which allows it to re-run the queries with EXPLAIN ANALYZE to get full query plans. This is not possible with slow query logs.</p>
                <p><span class='highlight'>What happens when an INSERT or UPDATE query is re-run?</span> EXPLAIN ANALYZE on updates or inserts do not modify the table, they only return the query plan. It's safe to re-run them as many times as you want.</p>
                <p><span class='highlight'>What if suggested indexes don't improve performance?</span> You may need to modify the query, which is outside of dbpill's current scope.</p>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 dbpill. All rights reserved.</p>
        </div>
    </footer>
    <script src="https://js.stripe.com/v3"></script>
    <script>
      const buyButton = document.getElementById("buy-button");
      const redeemLink = document.getElementById("redeem-link");
      if (buyButton) {
        buyButton.addEventListener("click", async (e) => {
          e.preventDefault();
          try {
            const resp = await fetch("/create-checkout-session", { method: "POST" });
            const data = await resp.json();

            // If the user already owns the product, skip Stripe and go straight to downloads page
            if (data.alreadyOwned) {
              window.location.assign("/downloads");
              return;
            }

            const stripe = Stripe("__STRIPE_PUBLISHABLE_KEY__");
            stripe.redirectToCheckout({ sessionId: data.id });
          } catch (err) {
            console.error(err);
            alert("Unable to start checkout. Please try again later.");
          }
        });
      }
      if (redeemLink) {
        redeemLink.addEventListener("click", async (e) => {
          e.preventDefault();
          const email = prompt("Enter the email you used to purchase dbpill:");
          if (!email) return;
          try {
            const resp = await fetch("/redeem", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ email })
            });
            if (resp.ok) {
              alert("We've sent you an email with your download link. Please check your inbox (and spam folder).\nThe link is valid for 24 hours.");
            } else if (resp.status === 404) {
              alert("No purchase found for that email. Make sure you typed it correctly or used the same address as on the receipt.\n\nNote: Apple Pay uses anonymized email addresses, you can find the address in the e-mail receipt of your purchase.");
            } else {
              alert("Unable to retrieve download link. Please try again later.");
            }
          } catch (err) {
            console.error(err);
            alert("Network error. Please try again later.");
          }
        });
      }
    </script>
</body>
</html>
